var S=Object.defineProperty;var O=(t,e,n)=>e in t?S(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var b=(t,e,n)=>O(t,typeof e!="symbol"?e+"":e,n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&i(s)}).observe(document,{childList:!0,subtree:!0});function n(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerPolicy&&(o.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?o.credentials="include":r.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(r){if(r.ep)return;r.ep=!0;const o=n(r);fetch(r.href,o)}})();function C(t,e){t.innerHTML=`${Math.floor(e)}`}const R=""+new URL("abort.wav",import.meta.url).href,k=""+new URL("autobegin.wav",import.meta.url).href,x=""+new URL("autoend.wav",import.meta.url).href,N=""+new URL("countdown.wav",import.meta.url).href,I=""+new URL("endgame.wav",import.meta.url).href,D=""+new URL("endmatch.wav",import.meta.url).href,P=""+new URL("teleopbegin.wav",import.meta.url).href,M=""+new URL("pickupcontrollers.wav",import.meta.url).href,U=""+new URL("results.wav",import.meta.url).href;class j{constructor(){b(this,"audios",{})}preload(){this.audios.abort=new Audio(R),this.audios.autobegin=new Audio(k),this.audios.autoend=new Audio(x),this.audios.countdown=new Audio(N),this.audios.endgame=new Audio(I),this.audios.endmatch=new Audio(D),this.audios.teleopbegin=new Audio(P),this.audios.pickupcontrollers=new Audio(M),this.audios.results=new Audio(U)}playSound(e){this.audios[e]&&this.audios[e].play()}}/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var m=function(t,e){return m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var r in i)i.hasOwnProperty(r)&&(n[r]=i[r])},m(t,e)};function E(t,e){m(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}function A(t){var e=typeof Symbol=="function"&&t[Symbol.iterator],n=0;return e?e.call(t):{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}}}function G(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var i=n.call(t),r,o=[],s;try{for(;(e===void 0||e-- >0)&&!(r=i.next()).done;)o.push(r.value)}catch(c){s={error:c}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(s)throw s.error}}return o}function W(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(G(arguments[e]));return t}var L=function(){function t(e,n){this.target=n,this.type=e}return t}(),F=function(t){E(e,t);function e(n,i){var r=t.call(this,"error",i)||this;return r.message=n.message,r.error=n,r}return e}(L),q=function(t){E(e,t);function e(n,i,r){n===void 0&&(n=1e3),i===void 0&&(i="");var o=t.call(this,"close",r)||this;return o.wasClean=!0,o.code=n,o.reason=i,o}return e}(L);/*!
 * Reconnecting WebSocket
 * by Pedro Ladaria <pedro.ladaria@gmail.com>
 * https://github.com/pladaria/reconnecting-websocket
 * License MIT
 */var B=function(){if(typeof WebSocket<"u")return WebSocket},Q=function(t){return typeof t<"u"&&!!t&&t.CLOSING===2},l={maxReconnectionDelay:1e4,minReconnectionDelay:1e3+Math.random()*4e3,minUptime:5e3,reconnectionDelayGrowFactor:1.3,connectionTimeout:4e3,maxRetries:1/0,maxEnqueuedMessages:1/0,startClosed:!1,debug:!1},$=function(){function t(e,n,i){var r=this;i===void 0&&(i={}),this._listeners={error:[],message:[],open:[],close:[]},this._retryCount=-1,this._shouldReconnect=!0,this._connectLock=!1,this._binaryType="blob",this._closeCalled=!1,this._messageQueue=[],this.onclose=null,this.onerror=null,this.onmessage=null,this.onopen=null,this._handleOpen=function(o){r._debug("open event");var s=r._options.minUptime,c=s===void 0?l.minUptime:s;clearTimeout(r._connectTimeout),r._uptimeTimeout=setTimeout(function(){return r._acceptOpen()},c),r._ws.binaryType=r._binaryType,r._messageQueue.forEach(function(u){return r._ws.send(u)}),r._messageQueue=[],r.onopen&&r.onopen(o),r._listeners.open.forEach(function(u){return r._callEventListener(o,u)})},this._handleMessage=function(o){r._debug("message event"),r.onmessage&&r.onmessage(o),r._listeners.message.forEach(function(s){return r._callEventListener(o,s)})},this._handleError=function(o){r._debug("error event",o.message),r._disconnect(void 0,o.message==="TIMEOUT"?"timeout":void 0),r.onerror&&r.onerror(o),r._debug("exec error listeners"),r._listeners.error.forEach(function(s){return r._callEventListener(o,s)}),r._connect()},this._handleClose=function(o){r._debug("close event"),r._clearTimeouts(),r._shouldReconnect&&r._connect(),r.onclose&&r.onclose(o),r._listeners.close.forEach(function(s){return r._callEventListener(o,s)})},this._url=e,this._protocols=n,this._options=i,this._options.startClosed&&(this._shouldReconnect=!1),this._connect()}return Object.defineProperty(t,"CONNECTING",{get:function(){return 0},enumerable:!0,configurable:!0}),Object.defineProperty(t,"OPEN",{get:function(){return 1},enumerable:!0,configurable:!0}),Object.defineProperty(t,"CLOSING",{get:function(){return 2},enumerable:!0,configurable:!0}),Object.defineProperty(t,"CLOSED",{get:function(){return 3},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"CONNECTING",{get:function(){return t.CONNECTING},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"OPEN",{get:function(){return t.OPEN},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"CLOSING",{get:function(){return t.CLOSING},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"CLOSED",{get:function(){return t.CLOSED},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"binaryType",{get:function(){return this._ws?this._ws.binaryType:this._binaryType},set:function(e){this._binaryType=e,this._ws&&(this._ws.binaryType=e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"retryCount",{get:function(){return Math.max(this._retryCount,0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"bufferedAmount",{get:function(){var e=this._messageQueue.reduce(function(n,i){return typeof i=="string"?n+=i.length:i instanceof Blob?n+=i.size:n+=i.byteLength,n},0);return e+(this._ws?this._ws.bufferedAmount:0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"extensions",{get:function(){return this._ws?this._ws.extensions:""},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"protocol",{get:function(){return this._ws?this._ws.protocol:""},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"readyState",{get:function(){return this._ws?this._ws.readyState:this._options.startClosed?t.CLOSED:t.CONNECTING},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"url",{get:function(){return this._ws?this._ws.url:""},enumerable:!0,configurable:!0}),t.prototype.close=function(e,n){if(e===void 0&&(e=1e3),this._closeCalled=!0,this._shouldReconnect=!1,this._clearTimeouts(),!this._ws){this._debug("close enqueued: no ws instance");return}if(this._ws.readyState===this.CLOSED){this._debug("close: already closed");return}this._ws.close(e,n)},t.prototype.reconnect=function(e,n){this._shouldReconnect=!0,this._closeCalled=!1,this._retryCount=-1,!this._ws||this._ws.readyState===this.CLOSED?this._connect():(this._disconnect(e,n),this._connect())},t.prototype.send=function(e){if(this._ws&&this._ws.readyState===this.OPEN)this._debug("send",e),this._ws.send(e);else{var n=this._options.maxEnqueuedMessages,i=n===void 0?l.maxEnqueuedMessages:n;this._messageQueue.length<i&&(this._debug("enqueue",e),this._messageQueue.push(e))}},t.prototype.addEventListener=function(e,n){this._listeners[e]&&this._listeners[e].push(n)},t.prototype.dispatchEvent=function(e){var n,i,r=this._listeners[e.type];if(r)try{for(var o=A(r),s=o.next();!s.done;s=o.next()){var c=s.value;this._callEventListener(e,c)}}catch(u){n={error:u}}finally{try{s&&!s.done&&(i=o.return)&&i.call(o)}finally{if(n)throw n.error}}return!0},t.prototype.removeEventListener=function(e,n){this._listeners[e]&&(this._listeners[e]=this._listeners[e].filter(function(i){return i!==n}))},t.prototype._debug=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];this._options.debug&&console.log.apply(console,W(["RWS>"],e))},t.prototype._getNextDelay=function(){var e=this._options,n=e.reconnectionDelayGrowFactor,i=n===void 0?l.reconnectionDelayGrowFactor:n,r=e.minReconnectionDelay,o=r===void 0?l.minReconnectionDelay:r,s=e.maxReconnectionDelay,c=s===void 0?l.maxReconnectionDelay:s,u=0;return this._retryCount>0&&(u=o*Math.pow(i,this._retryCount-1),u>c&&(u=c)),this._debug("next delay",u),u},t.prototype._wait=function(){var e=this;return new Promise(function(n){setTimeout(n,e._getNextDelay())})},t.prototype._getNextUrl=function(e){if(typeof e=="string")return Promise.resolve(e);if(typeof e=="function"){var n=e();if(typeof n=="string")return Promise.resolve(n);if(n.then)return n}throw Error("Invalid URL")},t.prototype._connect=function(){var e=this;if(!(this._connectLock||!this._shouldReconnect)){this._connectLock=!0;var n=this._options,i=n.maxRetries,r=i===void 0?l.maxRetries:i,o=n.connectionTimeout,s=o===void 0?l.connectionTimeout:o,c=n.WebSocket,u=c===void 0?B():c;if(this._retryCount>=r){this._debug("max retries reached",this._retryCount,">=",r);return}if(this._retryCount++,this._debug("connect",this._retryCount),this._removeListeners(),!Q(u))throw Error("No valid WebSocket class provided");this._wait().then(function(){return e._getNextUrl(e._url)}).then(function(_){e._closeCalled||(e._debug("connect",{url:_,protocols:e._protocols}),e._ws=e._protocols?new u(_,e._protocols):new u(_),e._ws.binaryType=e._binaryType,e._connectLock=!1,e._addListeners(),e._connectTimeout=setTimeout(function(){return e._handleTimeout()},s))})}},t.prototype._handleTimeout=function(){this._debug("timeout event"),this._handleError(new F(Error("TIMEOUT"),this))},t.prototype._disconnect=function(e,n){if(e===void 0&&(e=1e3),this._clearTimeouts(),!!this._ws){this._removeListeners();try{this._ws.close(e,n),this._handleClose(new q(e,n,this))}catch{}}},t.prototype._acceptOpen=function(){this._debug("accept open"),this._retryCount=0},t.prototype._callEventListener=function(e,n){"handleEvent"in n?n.handleEvent(e):n(e)},t.prototype._removeListeners=function(){this._ws&&(this._debug("removeListeners"),this._ws.removeEventListener("open",this._handleOpen),this._ws.removeEventListener("close",this._handleClose),this._ws.removeEventListener("message",this._handleMessage),this._ws.removeEventListener("error",this._handleError))},t.prototype._addListeners=function(){this._ws&&(this._debug("addListeners"),this._ws.addEventListener("open",this._handleOpen),this._ws.addEventListener("close",this._handleClose),this._ws.addEventListener("message",this._handleMessage),this._ws.addEventListener("error",this._handleError))},t.prototype._clearTimeouts=function(){clearTimeout(this._connectTimeout),clearTimeout(this._uptimeTimeout)},t}();function H(){return new $(`ws://${window.location.hostname}:80`)}let d;function f(t,e,n){const i=Date.now(),r=o=>{t.innerHTML=o};clearInterval(d),d=setInterval(()=>{const o=Math.round((i-Date.now())/1e3)+e;o<=0&&clearInterval(d);const s=v(o);r(s),n&&n(o)},1e3),r(`${v(e)}`)}function V(){clearInterval(d)}let h;function z(t,e){const n=Date.now(),i=r=>{t.innerHTML=r};h=setInterval(()=>{const r=+((Date.now()-n)/1e3).toFixed(3);r>=9999&&clearInterval(h),i(`${r}`)},1),i(`${e.toFixed(3)}`)}function g(t){clearInterval(h),z(t,0)}function J(){clearInterval(h)}function v(t){return(t-(t%=60))/60+(9<t?":":":0")+t}document.querySelector("#app").innerHTML=`
<div id="timer-section">
	<div id="timer">2:30</div>
	<input type="text" id="input">
	<input type="submit" id="send">
</div>
<div id="bottom-section">
	<div id="changes-box">1</div>
	<div id="score-box">
		<div id="score">0</div>
	</div>
	<div id="cycle-time-box">
		<div id="cycle-timer">0.00</div>
	</div>
</div>
`;const a=new j;a.preload();const p=document.getElementById("timer"),y=t=>{switch(t){case 120:a.playSound("autoend"),f(p,8,K);break;case 30:a.playSound("endgame");break;case 0:a.playSound("endmatch");break}t==120&&a.playSound("autoend")},K=t=>{switch(t){case 6:a.playSound("pickupcontrollers");break;case 3:a.playSound("countdown");break;case 0:a.playSound("teleopbegin"),f(p,120,y)}},w=document.getElementById("cycle-timer"),X=document.getElementById("score"),T=H();T.onmessage=t=>{let e;try{e=JSON.parse(t.data)}catch{console.error("Invalid socket message received");return}Y(e)};const Y=t=>{switch(t.event){case"start":a.playSound("autobegin"),f(p,150,y),g(w);break;case"end":break;case"abort":a.playSound("abort"),V(),J();break;case"resetTimer":f(p,150,y);break;case"resetCycle":g(w);break;case"setScore":t.value&&C(X,t.value);break;case"playSound":t.name&&a.playSound(t.name);break;case"error":t.name?console.error(`[SERVER] ${t.name}`):console.error("[SERVER] An unknown error has occurred");break;default:console.error("Unknown event received");break}};document.getElementById("send").addEventListener("click",()=>{T.send(document.getElementById("input").value)});
